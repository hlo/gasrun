var getDistance=require("js/getDistance"),getCarData=require("js/getCar"),self;function onRequestSuccess(a){if(a.indexOf("city not supported")>-1){$("#loadingPlaceHolder").remove();$("#loadingText").remove();$("#gasPrice").remove();document.getElementById("bodyContent").innerHTML='<div style="text-align: center; color: white;"><p><h1><span class="glyphicon glyphicon-remove-circle"></span></h1></p><h3>CURRENT CITY NOT SUPPORTED...</h3></div>';$("#bodyContent").show();throw {name:"FatalError",message:"Something went badly wrong"}}if(a.indexOf("city")>-1){getDistance.initialize();require("js/getCurrentPosition").parseCurrentPosition(a)}else{if(a.indexOf("getMake")>-1){$(".load").remove();getCarData.parseAndUpdateCarMake(a);document.getElementById("make").onchange=function(){$("#dropDowns").append("<img class='load' src='img/loadingGif.gif' width='20' height='20'/>");getCarData.getCarModel(document.getElementById("make").value)}}else{if(a.indexOf("makeM:")>-1){getCarData.parseAndUpdateCarModel(a);$(".load").remove();document.getElementById("model").onchange=function(){$("#dropDowns").append("<img class='load' src='img/loadingGif.gif' width='20' height='20'/>");getCarData.getCarYear(document.getElementById("model").value)}}else{if(a.indexOf("makeY:")>-1){getCarData.parseAndUpdateCarYear(a);$(".load").remove();document.getElementById("year").onchange=function(){$("#dropDowns").append("<img class='load' src='img/loadingGif.gif' width='20' height='20'/>");getCarData.getAvgMpg(document.getElementById("year").value)}}else{if(a.indexOf("makeMpg:")>-1){getCarData.parseAvgMpg(a);$(".load").remove()}}}}}}function onRequestError(a,b,c){console.debug("error",b+", "+c+":\n"+a.responseText)}function sendToPython(b,a){if(a==="gas"){pythonUrl="http://www.gasrun.ca/cgi-bin/getGasPrice.py"}else{if(a==="make"||a==="model"||a==="year"||a==="avgMpg"){pythonUrl="http://www.gasrun.ca/cgi-bin/getCarData.py"}}jQuery.ajax({url:pythonUrl,type:"POST",cache:false,data:JSON.stringify(b),contentType:"application/json",processData:false,success:onRequestSuccess,error:onRequestError})}self={sendToPython:sendToPython,};exports=self;